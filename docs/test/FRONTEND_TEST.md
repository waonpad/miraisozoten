# ゲーム部分のフロントエンドテストを行う

ひとまず, テスト対象に対して求められている引数の受け渡し, 行動を取ったときに正常に動作する事を確認することを目標とし, その他のテストケースに関しては努力目標とする

# 注意

筆者もテストについての知識が浅く, またテスト環境上でmswを動作させる等の環境が用意できていないため手探り状態です  
APIとの通信を行っているコンポーネントの前に, propsとして受け取った引数を扱うだけのコンポーネントから始めた方がいいと思います  
app/web/src/utils 配下は短く纏まった処理の関数, カスタムフックのみが存在しているのでそれらのファイルから触るのも良いかもしれません

### テスト対象のファイル一覧

- app/web/src/(todoufuken) 配下の全てのファイル(/\_/api ディレクトリを除く)
- app/web/src/components/maps 配下の全てのファイル(japan-checkbox-svg-map.tsxを除く)

### テストファイルについての規則

- テストファイルは, テスト対象ファイルと同じディレクトリに配置する
- テスト対象ファイルの拡張子の前に.testを付けたものをファイル名とする
- テスト対象ファイルのコードに対するテストは, 全てファイル名で紐付いたテストファイルに記述し, 分割しない

### テストの事前準備

#### プロダクトのセットアップ手順を一通り行う

docs/SETUP.mdを参照

#### mswを利用するテストを行う場合

```
cd packages/fb-tools
yarn dev
nps firebase.admin
```

### テストを書く

**基本的にテストコードはまずAIによって生成し, 人間はそれに加筆修正を行うことを大前提とする**

全てのファイルのテストが正常に動作するまで, 以下の手順を繰り返す

#### テストコードをAIに生成させる

1. AI自身が優秀な技術者であることを教える
2. テスト対象のコードをコピペする
3. テスト対象が依存しているコードや, 型情報等, 必要な情報を加える
4. 正常系のテストコードの生成を要求する
5. 正常にテスト可能なコードが生成されるまでコードの提供や会話を行う
6. テストファイルの命名規則に則って作成されたファイルに, 生成されたテストコードをコピペする

#### テストを実行する

全てのテストを実行する場合

```
yarn test
```

1ファイルだけテストする場合

```
yarn jest <テストファイルのパス>
```
